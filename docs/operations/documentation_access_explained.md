# Как работают документы и теги (совсем простое объяснение)

Представь, что у нас есть большой дом с комнатами. Документы — это комнаты. В каждой комнате лежат полезные вещи (инструкции, правила). Мы хотим, чтобы в «секретные» комнаты заходили только нужные люди.

## Две коробки с тегами

- **Теги пользователя (коробка №1).** Эти теги описывают человека: отдел, роль, стаж и т. п. Мы выдаём их при создании профиля. Они нужны для фильтров, отчётов, курсов. Примеры: «Отдел продаж», «Стажёр».
- **Теги документов (коробка №2).** Это наклейки для управления доступом. Они живут отдельно, специально для документации. Примеры: «Secret», «OnlySupport».

Даже если названия совпадают, это разные карточки с разными ID. Документ смотрит только на коробку №2. Чтобы человек прошёл, ему нужно получить документный тег (ключ) из этой коробки.

## Как всё работает

1. **Создаём наклейки.** В разделе /admin/docs администратор добавляет документный тег, например Secret.
2. **Вешаем наклейку на комнату.** Открываем документ и ставим тег Secret. Дверь закрыта для всех, у кого нет такого ключа.
3. **Раздаём ключи людям.** Через модалку «Доступ пользователей» выбираем сотрудника и выдаём ему документный тег Secret. На его брелоке появился ключ из коробки №2. (У пользователя могут оставаться свои теги из коробки №1 — они для аналитики и на доступ не влияют.)
4. **Проверяем вход.** Когда пользователь открывает документ, система смотрит:
   - Если на двери нет наклеек, вход свободен.
   - Если наклейки есть, у человека должен быть хотя бы один совпадающий ключ из коробки №2.

## Мини-пример

| Документ            | Наклейки       |
|---------------------|----------------|
| «Общее FAQ»         | — нет наклеек  |
| «Чек-лист охраны»   | Secret         |

| Пользователь | Теги пользователя (коробка №1) | Документные ключи (коробка №2) |
|--------------|--------------------------------|----------------------------------|
| Анна         | Отдел продаж                   | —                                |
| Борис        | Отдел охраны                   | Secret                           |

- Анна увидит только «Общее FAQ» — у неё нет документного ключа.
- Борис увидит оба документа, потому что у него есть документный тег Secret.

## Что запомнить

- Наклейки = документные теги (коробка №2). Делается в /admin/docs → «Управление тегами».
- Ключи = документные теги, выданные пользователю (коробка №2, модалка «Доступ пользователей»).
- Пользовательские теги (коробка №1) — для аналитики и курсов. Они не дают доступ к документам, пока мы не переведём систему на единый справочник.

То есть, чтобы человек попал в комнату, наклейка на двери и ключ на брелоке должны совпасть. Всё!
