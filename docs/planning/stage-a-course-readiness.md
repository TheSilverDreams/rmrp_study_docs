# Этап A — Завершение блока курсов

**Цель:** привести текущий учебный функционал (курсы, модули, квизы, прогресс) к состоянию production-ready, закрыв все долги перед расширением платформы.

## Область работ
- Завершить и вычистить существующие фичи каталога курсов, модулей и квизов.
- Обеспечить целостность данных: миграции, сиды, обработка краевых кейсов.
- Полировать пользовательский опыт для студентов, админов и суперадминов.
- Ввести минимальный набор метрик и тестов для уверенного релиза.

## Ключевые результаты (Deliverables)
- Актуализированный набор миграций и сидов, гарантирующий повторяемость развёртывания.
- UI/UX без «дыр»: предсказуемые состояния загрузки, ошибок, пустых списков.
- Набор автоматизированных тестов (юнит/интеграция для домена, smoke/e2e для ключевых потоков).
- Документ «Руководство по курсам» с описанием ролей и рабочих сценариев.
- Список известных ограничений и технических долгов, согласованный с владельцем продукта.

## Workstreams
### Backend
- Ревизия схемы БД: убедиться, что все таблицы и индексы отражают текущую модель (курсы, модули, вопросы, попытки, прогресс).
- Проверка сидов: исключить жёстко зашитые идентификаторы, описать устанавливаемые учётки и данные.
- Обработка краевых кейсов API (например, удаление дублированных модулей, повторное прохождение квизов, восстановление прогресса после отказов).
- Улучшить логирование ошибок и структурировать ответы API (единый формат `error_code`, `message`, `details`).

### Frontend
- Пройти пользовательские сценарии для всех ролей: создание/редактирование курсов, прохождение модулей, просмотр прогресса.
- Устранить UX-шероховатости: загрузочные скелетоны, пустые состояния, исправление обрезанных переводов, подсказки.
- Настроить доступность (aria-labels, фокус-стейты) хотя бы для критичных форм и кнопок.
- Стандартизировать уведомления (успех/ошибка) и диалоги подтверждения.

### QA & тестирование
- Сформировать smoke-checklist (минимум 10 сценариев) и автоматизировать его в виде Playwright/Cypress e2e.
- Юнит-тесты доменного слоя (подход Arrange-Act-Assert для расчёта прогресса, проверок допуска к модулю).
- Настроить GitHub Actions/CI для запуска тестов и линтера при PR.

### Документация
- Обновить пользовательские инструкции: «Как создать курс», «Как пройти модуль», «Как проверить прогресс студента».
- Подготовить changelog с перечислением правок Этапа A.
- Создать внутренний FAQ по типовым инцидентам (например, что делать, если студент не видит курс).

### Процессы
- Ввести контроль качества требований: баги и улучшения заносятся в единый backlog (Jira/Linear/Notion).
- Провести демо для заинтересованных сторон и собрать обратную связь перед закрытием этапа.

## Зависимости
- Доступ к актуальному списку обнаруженных багов и UX-замечаний.
- Вовлечённость продуктового владельца/куратора курсов для подтверждения Definition of Done.
- Время команды DevOps, если потребуется настройка CI/CD.

## Риски и меры
- **Скрытые технические долги.** → Вести журнал находок, при необходимости расширять план этапа.
- **Недостаток тестов.** → Выделить отдельный спринт-день на покрытие тестами критичных сценариев.
- **Недоступность данных.** → Сделать бэкапы БД перед миграциями и документировать процесс отката.

## Метрики успеха
- 0 критичных багов по результатам тестового цикла.
- Среднее время прохождения smoke-тестов — ≤5 минут (для быстрой регрессии).
- Полный повтор развёртывания с нуля (migrate + seed) проходит без ручных правок.

## Таймлайн (оценка)
- **Неделя 1:** аудит БД и сидов, список долгов, фиксы критичных багов.
- **Неделя 2:** UX-полировка, документирование, подготовка e2e тестов.
- **Неделя 3:** финальные тесты, демо, фиксация результатов и затвердение перехода к Этапу B.
